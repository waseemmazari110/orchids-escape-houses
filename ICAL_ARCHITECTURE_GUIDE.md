# iCal Calendar Feature - Visual Guide & Architecture

## User Interface Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Property Listing Page                â”‚
â”‚    (Brighton Seafront Villa, etc)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚   [Property Details & Gallery]              â”‚
â”‚                                             â”‚
â”‚   Price: From Â£500/night                    â”‚
â”‚                                             â”‚
â”‚   [ğŸ“… BOOK NOW] â† User clicks               â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BookingModal Component Opens            â”‚
â”‚   (Dialog with booking form)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  useEffect triggers â†’  Fetch availability   â”‚
â”‚                                             â”‚
â”‚  /api/properties/123/availability           â”‚
â”‚           â†“                                 â”‚
â”‚  Returns: {                                 â”‚
â”‚    unavailableDates: [                      â”‚
â”‚      "2026-02-01",                          â”‚
â”‚      "2026-02-02",                          â”‚
â”‚      ...                                    â”‚
â”‚    ]                                        â”‚
â”‚  }                                          â”‚
â”‚                                             â”‚
â”‚  â³ Loading... (spinner shows)              â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calendar Picker Displays                   â”‚
â”‚  (Range picker with 2 months visible)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ January 2026          February 2026         â”‚
â”‚                                             â”‚
â”‚ S M T W T F S        S M T W T F S         â”‚
â”‚         1 2 3        1 2 3 4 5 6 7         â”‚
â”‚ 4 5 6 7 8 9 10       8 9 10 11 12 13 14   â”‚
â”‚ 11 12 13 14 15 âœ— âœ—   15 âœ— âœ— 18 19 20 21   â”‚
â”‚ 18 19 20 21 22 24 25  22 âœ“ âœ“ 25 26 âœ“ 28   â”‚
â”‚ 25 26 27 28 29 30 31  29 âœ“                â”‚
â”‚                                             â”‚
â”‚ âœ“ = Available                               â”‚
â”‚ âœ— = Unavailable (grayed out, disabled)     â”‚
â”‚                                             â”‚
â”‚ â„¹ï¸ Info: "Grayed-out dates are unavailable â”‚
â”‚ (booked or synced from your calendar)"     â”‚
â”‚                                             â”‚
â”‚ User selects: Jan 25 â†’ Feb 1               â”‚
â”‚ (Only available dates allowed)             â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Enquiry Form Auto-Fills                â”‚
â”‚  (Below booking modal or new page)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ Check-in:    25 January 2026 âœ“              â”‚
â”‚ Check-out:   1 February 2026 âœ“              â”‚
â”‚ Guests:      2 âœ“                            â”‚
â”‚                                             â”‚
â”‚ Name:        [________________]             â”‚
â”‚ Email:       [________________]             â”‚
â”‚ Phone:       [________________]             â”‚
â”‚                                             â”‚
â”‚ [Cancel]  [SUBMIT ENQUIRY]                  â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOOKING SYSTEM                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  EXTERNAL SOURCES          DATABASE         USER INPUT  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                          â”‚
â”‚  â€¢ Airbnb                  Confirmed         Select      â”‚
â”‚  â€¢ Booking.com      +      Bookings    +    Dates in   â”‚
â”‚  â€¢ Google Calendar          (Table)         Modal       â”‚
â”‚  â€¢ VRBO                                                  â”‚
â”‚  â€¢ Custom iCal                                          â”‚
â”‚                                                          â”‚
â”‚        â†“                       â†“                â†“        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                        â”‚                                â”‚
â”‚                        â–¼                                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚ iCal Parser Library    â”‚                   â”‚
â”‚            â”‚ ical-parser.ts        â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                        â”‚                                â”‚
â”‚                        â–¼                                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚ Availability API      â”‚                   â”‚
â”‚            â”‚ /api/[id]/availabilityâ”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                        â”‚                                â”‚
â”‚                        â–¼                                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚ BookingModal Componentâ”‚                   â”‚
â”‚            â”‚ (Calendar UI)         â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                        â”‚                                â”‚
â”‚                        â–¼                                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚            â”‚ Disabled Dates        â”‚                   â”‚
â”‚            â”‚ (Visual Feedback)     â”‚                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Diagram

```
BookingModal.tsx
â”œâ”€â”€ State Management
â”‚   â”œâ”€â”€ checkInDate
â”‚   â”œâ”€â”€ checkOutDate
â”‚   â”œâ”€â”€ guests
â”‚   â”œâ”€â”€ unavailableDates â† NEW
â”‚   â””â”€â”€ isLoadingAvailability â† NEW
â”‚
â”œâ”€â”€ Effects
â”‚   â””â”€â”€ useEffect (on modal open) â† NEW
â”‚       â””â”€â”€ fetchAvailability()
â”‚           â””â”€â”€ GET /api/properties/{id}/availability
â”‚
â”œâ”€â”€ Functions
â”‚   â”œâ”€â”€ handleBookNow() [existing]
â”‚   â”œâ”€â”€ fetchAvailability() â† NEW
â”‚   â””â”€â”€ isDateDisabled() â† NEW
â”‚       â”œâ”€â”€ Check if date < today
â”‚       â””â”€â”€ Check if date in unavailableDates
â”‚
â”œâ”€â”€ UI Elements
â”‚   â”œâ”€â”€ Check-in/Check-out Picker
â”‚   â”‚   â”œâ”€â”€ Loading Indicator (while fetching)
â”‚   â”‚   â”œâ”€â”€ Info Banner (about unavailable dates)
â”‚   â”‚   â””â”€â”€ Calendar Component
â”‚   â”‚       â””â”€â”€ disabled prop uses isDateDisabled()
â”‚   â”‚
â”‚   â”œâ”€â”€ Guests Counter [existing]
â”‚   â”œâ”€â”€ Price Summary [existing]
â”‚   â””â”€â”€ Action Buttons [existing]
â”‚
â””â”€â”€ Integration
    â””â”€â”€ PropertyCard (parent)
        â”œâ”€â”€ Passes: propertyId, propertySlug, title, priceFrom
        â””â”€â”€ Manages: bookingModalOpen state
```

## iCal Data Flow

```
iCal Feed URL (Property.iCalURL)
â”‚
â”‚ Example: https://calendar.google.com/calendar/ical/xxx/public/basic.ics
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ parseICalUrl(url)                   â”‚
â”‚                                     â”‚
â”‚ 1. Fetch iCal data                  â”‚
â”‚ 2. Parse VEVENT blocks              â”‚
â”‚ 3. Extract DTSTART & DTEND          â”‚
â”‚ 4. Convert to Date objects          â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BookedDateRange[]                   â”‚
â”‚                                     â”‚
â”‚ [{                                  â”‚
â”‚   start: Date(2026-02-01),          â”‚
â”‚   end: Date(2026-02-05),            â”‚
â”‚   summary: "Guest Name",            â”‚
â”‚   description: "..."                â”‚
â”‚ }, ...]                             â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ (Combined with DB bookings)
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ combineBookedDates()                â”‚
â”‚                                     â”‚
â”‚ Merges iCal + Database bookings     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ getUnavailableDates()               â”‚
â”‚                                     â”‚
â”‚ Converts date ranges to             â”‚
â”‚ array of individual dates           â”‚
â”‚                                     â”‚
â”‚ [Date, Date, Date, ...]            â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Response (JSON)                 â”‚
â”‚                                     â”‚
â”‚ {                                   â”‚
â”‚   unavailableDates: [               â”‚
â”‚     "2026-02-01",                   â”‚
â”‚     "2026-02-02",                   â”‚
â”‚     ...                             â”‚
â”‚   ],                                â”‚
â”‚   bookedRanges: [...],              â”‚
â”‚   hasICalUrl: true,                 â”‚
â”‚   cachedAt: "..."                   â”‚
â”‚ }                                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BookingModal (Client-side)          â”‚
â”‚                                     â”‚
â”‚ setUnavailableDates(data)           â”‚
â”‚                                     â”‚
â”‚ Uses in isDateDisabled():           â”‚
â”‚ unavailableDates.includes(dateStr)  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

```
BookingModal State Management:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Date Selection (existing)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ checkInDate: Date | undefined               â”‚
â”‚ checkOutDate: Date | undefined              â”‚
â”‚ datePickerOpen: boolean                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Availability Data (NEW)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ unavailableDates: string[]                  â”‚
â”‚   â”œâ”€â”€ Populated by: fetchAvailability()     â”‚
â”‚   â”œâ”€â”€ Format: ["2026-02-01", ...]          â”‚
â”‚   â”œâ”€â”€ Used in: isDateDisabled()            â”‚
â”‚   â””â”€â”€ Updated: When modal opens            â”‚
â”‚                                             â”‚
â”‚ isLoadingAvailability: boolean              â”‚
â”‚   â”œâ”€â”€ Populated by: fetchAvailability()     â”‚
â”‚   â”œâ”€â”€ Used in: Loading spinner indicator   â”‚
â”‚   â””â”€â”€ Updated: During fetch                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Other State (existing)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ guests: number                              â”‚
â”‚ guestsOpen: boolean                         â”‚
â”‚ isProcessing: boolean                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Calendar Styling

```
Date Display States:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ State       â”‚ Styling                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Available   â”‚ â€¢ White/normal text         â”‚
â”‚             â”‚ â€¢ Cursor pointer            â”‚
â”‚             â”‚ â€¢ Clickable                 â”‚
â”‚             â”‚                             â”‚
â”‚ Unavailable â”‚ â€¢ Grayed out (opacity: 50) â”‚
â”‚ (Disabled)  â”‚ â€¢ Cursor not-allowed        â”‚
â”‚             â”‚ â€¢ Not clickable             â”‚
â”‚             â”‚                             â”‚
â”‚ In Range    â”‚ â€¢ Background highlight     â”‚
â”‚ (Selected)  â”‚ â€¢ Blue/sage color           â”‚
â”‚             â”‚ â€¢ Modified class            â”‚
â”‚             â”‚                             â”‚
â”‚ Range Start â”‚ â€¢ Rounded left              â”‚
â”‚ (Check-in)  â”‚ â€¢ Darker highlight          â”‚
â”‚             â”‚                             â”‚
â”‚ Range End   â”‚ â€¢ Rounded right             â”‚
â”‚ (Check-out) â”‚ â€¢ Darker highlight          â”‚
â”‚             â”‚                             â”‚
â”‚ Today       â”‚ â€¢ Special indicator (ring)  â”‚
â”‚             â”‚ â€¢ Current date marker       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
Availability Fetch
â”‚
â”œâ”€â–º Network Error
â”‚   â””â”€â–º Catch error
â”‚       â””â”€â–º Log to console
â”‚           â””â”€â–º Set unavailableDates = []
â”‚               â””â”€â–º Calendar works (DB bookings only)
â”‚
â”œâ”€â–º iCal Parse Error
â”‚   â””â”€â–º Catch error
â”‚       â””â”€â–º Log error message
â”‚           â””â”€â–º Continue with DB bookings
â”‚               â””â”€â–º graceful degradation
â”‚
â”œâ”€â–º Property Not Found (404)
â”‚   â””â”€â–º Return error response
â”‚       â””â”€â–º Frontend handles gracefully
â”‚
â””â”€â–º Success (200)
    â””â”€â–º Parse JSON response
        â””â”€â–º Set state
            â””â”€â–º Calendar renders
```

## Performance Timeline

```
Event: User clicks "Book Now"
â”‚
â”œâ”€ T+0ms      Modal opens
â”œâ”€ T+10ms     useEffect triggers
â”œâ”€ T+20ms     API request sent
â”‚             (network latency)
â”œâ”€ T+200ms    API response received
â”œâ”€ T+220ms    Data parsed
â”œâ”€ T+230ms    State updated
â”œâ”€ T+250ms    Calendar re-renders
â”‚             with disabled dates
â””â”€ T+300ms    User sees calendar ready
              (total: ~300ms)

Cache hits (subsequent visits):
â”œâ”€ T+0ms      Modal opens
â”œâ”€ T+10ms     API returns cached data
â”œâ”€ T+50ms     Calendar rendered
â””â”€ T+100ms    Ready
              (total: ~100ms)
```

---

This visual guide should help developers understand the feature flow, data architecture, and integration points.
